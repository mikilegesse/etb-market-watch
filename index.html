<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üá™üáπ ETB Terminal v42.10</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        :root {
            --bg: #000000;
            --card: #1C1C1E;
            --border: #38383A;
            --text: #FFFFFF;
            --text-secondary: #8E8E93;
            --accent: #0A84FF;
            --green: #00C805;
            --red: #FF3B30;
            --orange: #FF9500;
        }
        
        [data-theme="light"] {
            --bg: #F2F2F7;
            --card: #FFFFFF;
            --border: #C6C6C8;
            --text: #1C1C1E;
            --text-secondary: #6C6C70;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.5;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, var(--card) 0%, rgba(10,132,255,0.1) 100%);
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .rate-display {
            display: flex;
            justify-content: center;
            align-items: baseline;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .main-rate {
            font-size: 56px;
            font-weight: 800;
            background: linear-gradient(135deg, #00ff9d, #00C805);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .rate-label {
            font-size: 18px;
            color: var(--text-secondary);
        }
        
        .premium-badge {
            background: #34C759;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 16px;
        }
        
        .ticker {
            background: var(--card);
            padding: 12px 0;
            overflow: hidden;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }
        
        .ticker-content {
            display: inline-block;
            white-space: nowrap;
            animation: ticker 60s linear infinite;
            font-size: 14px;
            font-weight: 500;
        }
        
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-33.33%); }
        }
        
        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        th {
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
        }
        
        .chart-container {
            height: 350px;
            margin: 20px 0;
        }
        
        .trend-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .trend-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 6px 14px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .trend-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .trend-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        .depth-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        
        .depth-side {
            background: var(--bg);
            border-radius: 12px;
            padding: 16px;
        }
        
        .depth-title {
            font-weight: 700;
            margin-bottom: 16px;
            font-size: 15px;
        }
        
        .stats-panel {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border);
        }
        
        .stats-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .stats-section {
            margin-bottom: 24px;
        }
        
        .stats-section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }
        
        .stat-card {
            background: rgba(10, 132, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            text-align: center;
        }
        
        .buy-card {
            background: rgba(0, 200, 5, 0.08);
            border-color: rgba(0, 200, 5, 0.3);
        }
        
        .sell-card {
            background: rgba(255, 59, 48, 0.08);
            border-color: rgba(255, 59, 48, 0.3);
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 6px;
        }
        
        .stat-value.green { color: #00C805; }
        .stat-value.red { color: #FF3B30; }
        
        .stat-volume {
            font-size: 13px;
            color: #00bfff;
            font-weight: 600;
        }
        
        .api-badge {
            background: rgba(10, 132, 255, 0.2);
            color: #0A84FF;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            margin-left: 10px;
            font-weight: 600;
        }
        
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            z-index: 1000;
        }
        
        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 13px;
            border-top: 1px solid var(--border);
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .depth-grid { grid-template-columns: 1fr; }
            .main-rate { font-size: 42px; }
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
    
    <div class="ticker">
        <div class="ticker-content">üü° Binance: 173.43 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üîµ MEXC: 176.21 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üü£ OKX: 163.40 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üèõÔ∏è Official: 154.68 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üíõ Western Union: 156.22 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üíö Remitly: 157.00 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üß° Ria: 156.53 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üü° Binance: 173.43 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üîµ MEXC: 176.21 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üü£ OKX: 163.40 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üèõÔ∏è Official: 154.68 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üíõ Western Union: 156.22 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üíö Remitly: 157.00 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üß° Ria: 156.53 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üü° Binance: 173.43 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üîµ MEXC: 176.21 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üü£ OKX: 163.40 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üèõÔ∏è Official: 154.68 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üíõ Western Union: 156.22 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üíö Remitly: 157.00 ETB &nbsp;&nbsp;|&nbsp;&nbsp; üß° Ria: 156.53 ETB</div>
    </div>
    
    <div class="container">
        <header>
            <h1>üá™üáπ ETB Financial Terminal</h1>
            <div class="rate-display">
                <span class="main-rate">175.97</span>
                <span class="rate-label">ETB/USD</span>
                <span class="premium-badge">+13.8% Premium</span>
            </div>
            <p style="margin-top:15px;color:var(--text-secondary);">
                Black Market Rate vs Official: 154.68 ETB
            </p>
        </header>
        
        <!-- Market Summary -->
        <div class="card">
            <div class="card-title">üìä Market Summary</div>
            <table>
                <thead>
                    <tr>
                        <th>Exchange</th>
                        <th>Best Sell</th>
                        <th>Best Buy</th>
                        <th>Sell Ads</th>
                        <th>Buy Ads</th>
                    </tr>
                </thead>
                <tbody>
                    
            <tr>
                <td style="font-weight:600;"><span style="color:#F3BA2F">üü°</span> BINANCE</td>
                <td style="color:var(--green);font-weight:700;">173.43</td>
                <td style="color:var(--red);font-weight:600;">176.28</td>
                <td>339</td>
                <td>2</td>
            </tr>
            
            <tr>
                <td style="font-weight:600;"><span style="color:#2E55E6">üîµ</span> MEXC</td>
                <td style="color:var(--green);font-weight:700;">176.21</td>
                <td style="color:var(--red);font-weight:600;">185.70</td>
                <td>42</td>
                <td>29</td>
            </tr>
            
            <tr>
                <td style="font-weight:600;"><span style="color:#A855F7">üü£</span> OKX</td>
                <td style="color:var(--green);font-weight:700;">163.40</td>
                <td style="color:var(--red);font-weight:600;">178.41</td>
                <td>89</td>
                <td>1</td>
            </tr>
            
                </tbody>
            </table>
        </div>
        
        <!-- Price Trend Chart -->
        <div class="card">
            <div class="card-title">üìà Price Trend & Premium</div>
            <div class="trend-buttons">
                <button class="trend-btn" data-trend="1h" onclick="filterTrend('1h')">1H</button>
                <button class="trend-btn" data-trend="1d" onclick="filterTrend('1d')">1D</button>
                <button class="trend-btn" data-trend="1w" onclick="filterTrend('1w')">1W</button>
                <button class="trend-btn active" data-trend="all" onclick="filterTrend('all')">ALL</button>
            </div>
            <div id="trendChart" class="chart-container"></div>
        </div>
        
        <!-- Exchange Distribution -->
        <div class="card">
            <div class="card-title">üéØ Price Distribution by Exchange</div>
            <div id="scatterChart" class="chart-container"></div>
        </div>
        
        <!-- Market Depth -->
        <div class="card">
            <div class="card-title">üìä Live Market Insight</div>
            <div class="depth-grid">
                <div class="depth-side">
                    <div class="depth-title" style="color:var(--green);">Total Market Supply (Sell Orders)</div>
                    <div style="display:grid;grid-template-columns:100px 70px 1fr;gap:8px;font-size:12px;color:var(--text-secondary);margin-bottom:8px;font-weight:600;">
                        <span>USD Supply</span>
                        <span>At Price</span>
                        <span>Volume by Exchange</span>
                    </div>
                    <div id="supplyChart"></div>
                </div>
                <div class="depth-side">
                    <div class="depth-title" style="color:var(--red);">Total Market Demand (Buy Orders)</div>
                    <div style="display:grid;grid-template-columns:100px 70px 1fr;gap:8px;font-size:12px;color:var(--text-secondary);margin-bottom:8px;font-weight:600;">
                        <span>USD Demand</span>
                        <span>At Price</span>
                        <span>Volume by Exchange</span>
                    </div>
                    <div id="demandChart"></div>
                </div>
            </div>
            <div style="display:flex;justify-content:center;gap:24px;margin-top:16px;padding-top:16px;border-top:1px solid var(--border);">
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="width:16px;height:16px;background:#F3BA2F;border-radius:4px;"></div>
                    <span style="font-size:13px;">üü° Binance</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="width:16px;height:16px;background:#2E55E6;border-radius:4px;"></div>
                    <span style="font-size:13px;">üîµ MEXC</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;">
                    <div style="width:16px;height:16px;background:#A855F7;border-radius:4px;"></div>
                    <span style="font-size:13px;">üü£ OKX</span>
                </div>
            </div>
        </div>
        
        <!-- Transaction Statistics - NOW FROM API -->
        <div class="stats-panel">
            <div class="stats-title">
                Transaction Statistics (24 hrs)
                <span class="api-badge">üì° p2p.army API</span>
            </div>
            
            <div class="stats-section">
                <div class="stats-section-title">üü¢ Buy Transactions</div>
                <div class="stats-grid">
                    <div class="stat-card buy-card">
                        <div class="stat-label">Last 1 Hour</div>
                        <div class="stat-value green">45</div>
                        <div class="stat-volume">20,841 USDT</div>
                    </div>
                    <div class="stat-card buy-card">
                        <div class="stat-label">Today</div>
                        <div class="stat-value green">878</div>
                        <div class="stat-volume">396,064 USDT</div>
                    </div>
                    <div class="stat-card buy-card">
                        <div class="stat-label">Overall (24h)</div>
                        <div class="stat-value green">943</div>
                        <div class="stat-volume">422,249 USDT</div>
                    </div>
                </div>
            </div>
            
            <div class="stats-section">
                <div class="stats-section-title">üî¥ Sell Transactions</div>
                <div class="stats-grid">
                    <div class="stat-card sell-card">
                        <div class="stat-label">Last 1 Hour</div>
                        <div class="stat-value red">1,147</div>
                        <div class="stat-volume">4,529,141 USDT</div>
                    </div>
                    <div class="stat-card sell-card">
                        <div class="stat-label">Today</div>
                        <div class="stat-value red">24,217</div>
                        <div class="stat-volume">95,604,285 USDT</div>
                    </div>
                    <div class="stat-card sell-card">
                        <div class="stat-label">Overall (24h)</div>
                        <div class="stat-value red">27,671</div>
                        <div class="stat-volume">109,051,243 USDT</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI Analysis -->
        
        <div class="stats-panel" style="background:linear-gradient(135deg, var(--card) 0%, rgba(10,132,255,0.05) 100%);">
            <div class="stats-title" style="display:flex;align-items:center;justify-content:center;gap:12px;">
                ü§ñ AI Market Analysis <span style="background:#FF3B30;color:white;padding:4px 12px;border-radius:20px;font-weight:600;">üìâ BEARISH</span> <span style="background:#8E8E93;color:white;padding:2px 8px;border-radius:10px;font-size:11px;margin-left:10px;">FALLBACK</span>
            </div>
            
            <div style="text-align:center;margin-bottom:20px;">
                <span style="font-size:13px;color:#FF9500;font-weight:600;">Confidence: MEDIUM</span>
            </div>
            
            <div style="background:var(--bg);padding:20px;border-radius:12px;margin-bottom:20px;border-left:4px solid var(--accent);">
                <p style="font-size:16px;line-height:1.7;color:var(--text);margin:0;">
                    The ETB black market rate is currently 175.97 ETB/USD, representing a 13.8% premium over the official rate of 154.68 ETB. Strong selling pressure indicates USDT supply increase.
                </p>
            </div>
            
            <!-- WHY THE GAP SECTION -->
            <div style="background:linear-gradient(135deg, rgba(255,149,0,0.15), rgba(255,149,0,0.05));padding:20px;border-radius:12px;margin-bottom:20px;border:1px solid rgba(255,149,0,0.4);">
                <div style="font-weight:700;color:#FF9500;margin-bottom:12px;font-size:18px;">
                    üìä Why the 13.8% Gap Between Black Market & Official Rate?
                </div>
                <div style="color:var(--text);line-height:1.7;font-size:15px;">
                    The 13.8% gap exists primarily due to foreign currency shortage in official banking channels, forcing businesses to seek USD through parallel markets at premium rates.
                </div>
            </div>
            
            <!-- DRIVERS SECTION -->
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;">
                <div style="background:rgba(255,59,48,0.1);padding:20px;border-radius:12px;border:1px solid rgba(255,59,48,0.3);">
                    <div style="font-weight:700;color:#FF3B30;margin-bottom:12px;font-size:16px;">
                        üî¥ Black Market Drivers
                    </div>
                    <ul style="margin:0;padding-left:20px;list-style-type:disc;">
                        <li style="margin-bottom:6px;color:var(--text);">High demand for USD from importers and businesses</li><li style="margin-bottom:6px;color:var(--text);">Limited forex availability through official channels</li><li style="margin-bottom:6px;color:var(--text);">Diaspora remittance preferences for better rates</li>
                    </ul>
                </div>
                
                <div style="background:rgba(52,199,89,0.1);padding:20px;border-radius:12px;border:1px solid rgba(52,199,89,0.3);">
                    <div style="font-weight:700;color:#34C759;margin-bottom:12px;font-size:16px;">
                        üèõÔ∏è Official Rate Factors
                    </div>
                    <ul style="margin:0;padding-left:20px;list-style-type:disc;">
                        <li style="margin-bottom:6px;color:var(--text);">NBE monetary policy and forex reserves</li><li style="margin-bottom:6px;color:var(--text);">IMF program requirements and reform timeline</li>
                    </ul>
                </div>
            </div>
            
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;">
                <div style="background:rgba(52,199,89,0.1);padding:20px;border-radius:12px;border:1px solid rgba(52,199,89,0.3);">
                    <div style="font-weight:700;color:#34C759;margin-bottom:12px;font-size:16px;">
                        üí° Key Insights
                    </div>
                    <ul style="margin:0;padding-left:20px;list-style-type:disc;">
                        <li style="margin-bottom:8px;color:var(--text);">Black market premium: 13.8% above official rate</li><li style="margin-bottom:8px;color:var(--text);">24h volume: $109,473,492 USDT traded</li><li style="margin-bottom:8px;color:var(--text);">Market spread: 163.40 - 185.70 ETB</li>
                    </ul>
                </div>
                
                <div style="background:rgba(255,149,0,0.1);padding:20px;border-radius:12px;border:1px solid rgba(255,149,0,0.3);">
                    <div style="font-weight:700;color:#FF9500;margin-bottom:12px;font-size:16px;">
                        ‚ö†Ô∏è Risk Factors
                    </div>
                    <ul style="margin:0;padding-left:20px;list-style-type:disc;">
                        <li style="margin-bottom:8px;color:var(--text);">Exchange rate volatility during policy changes</li><li style="margin-bottom:8px;color:var(--text);">P2P transaction counterparty risks</li>
                    </ul>
                </div>
            </div>
            
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px;">
                <div style="background:rgba(10,132,255,0.1);padding:20px;border-radius:12px;border:1px solid rgba(10,132,255,0.3);">
                    <div style="font-weight:700;color:#0A84FF;margin-bottom:8px;">üìÖ Short-Term (1-7 days)</div>
                    <div style="color:var(--text);font-size:15px;">Rate may decrease to 172.97-174.97 ETB</div>
                </div>
                
                <div style="background:rgba(175,82,222,0.1);padding:20px;border-radius:12px;border:1px solid rgba(175,82,222,0.3);">
                    <div style="font-weight:700;color:#AF52DE;margin-bottom:8px;">üìÜ Medium-Term (1-4 weeks)</div>
                    <div style="color:var(--text);font-size:15px;">Market expected to remain volatile. Monitor NBE policy announcements for direction.</div>
                </div>
            </div>
            
            <div style="background:linear-gradient(135deg, rgba(0,200,5,0.15), rgba(0,200,5,0.05));padding:20px;border-radius:12px;border:1px solid rgba(0,200,5,0.4);">
                <div style="font-weight:700;color:#00C805;margin-bottom:8px;">üí∞ Recommendation</div>
                <div style="color:var(--text);font-size:15px;">For remittances, compare legal channel rates (Western Union, Remitly, Ria). Legal channels offer security despite lower rates.</div>
            </div>
        </div>
        
        
        <footer>
            Official Rate: 154.68 ETB | Last Update: 2025-12-12 20:17:01 UTC<br>
            v42.10 ‚Ä¢ Real Historical Data via p2p.army API üì°
        </footer>
    </div>
    
    <script>
        let currentTrendPeriod = 'all';
        const chartData = {"BINANCE": [176.29, 176.29, 176.29, 176.29, 176.29, 176.29, 176.29, 176.29, 176.29, 176.29, 176.29, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.28, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.27, 176.23, 176.14, 176.1, 176.1, 176.1, 176.09, 176.04, 176.03, 175.93, 175.92, 175.92, 175.92, 175.91, 175.9, 175.9, 175.76, 175.7, 175.7, 175.7, 175.7, 175.7, 175.7, 175.7, 175.7, 175.7, 175.7, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.68, 175.68, 175.68, 175.68, 175.68, 175.66, 175.64, 175.58, 175.58, 175.58, 175.58, 175.58, 175.57, 175.56, 175.54, 175.52, 175.52, 175.52, 175.52, 175.5, 175.49, 175.48, 175.48, 175.47, 175.47, 175.44, 175.44, 175.42, 175.42, 175.42, 175.41, 175.41, 175.41, 175.41, 175.41, 175.39, 175.39, 175.39, 175.39, 175.35, 175.34, 175.34, 175.34, 175.33, 175.33, 175.32, 175.32, 175.31, 175.3, 175.3, 175.3, 175.29, 175.29, 175.29, 175.29, 175.29, 175.29, 175.29, 175.29, 175.29, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.26, 175.25, 175.24, 175.24, 175.23, 175.23, 175.23, 175.22, 175.22, 175.21, 175.2, 175.2, 175.17, 175.17, 175.16, 175.15, 175.15, 175.12, 175.1, 175.07, 175.05, 175.0, 175.0, 175.0, 174.99, 174.99, 174.99, 174.99, 174.99, 174.99, 174.99, 174.94, 174.9, 174.9, 174.9, 174.88, 174.87, 174.87, 174.87, 174.84, 174.84, 174.83, 174.81, 174.8, 174.8, 174.78, 174.74, 174.68, 174.67, 174.65, 174.6, 174.51, 174.33, 174.28, 174.27, 174.26, 174.26, 174.24, 174.24, 174.2, 174.17, 174.05, 174.05, 174.05, 174.05, 174.05, 174.04, 174.01, 174.01, 174.0, 174.0, 174.0, 173.99, 173.99, 173.99, 173.86, 173.86, 173.79, 173.7, 173.64, 173.59, 173.58, 173.56, 173.56, 173.55, 173.55, 173.5, 173.5, 173.5, 173.48, 173.47, 173.47, 173.47, 173.47, 173.45, 173.43, 175.44, 176.28], "MEXC": [181.8, 181.02, 181.0, 181.0, 180.5, 180.26, 180.26, 180.25, 180.25, 180.19, 180.18, 180.17, 180.0, 180.0, 180.0, 179.86, 179.77, 179.76, 179.6, 179.58, 179.33, 179.29, 179.21, 179.15, 179.1, 179.0, 179.0, 179.0, 178.5, 178.4, 178.31, 178.0, 178.0, 178.0, 178.0, 177.51, 177.51, 177.5, 177.21, 177.2, 177.01, 176.21, 181.8, 181.86, 181.9, 182.0, 182.87, 182.97, 182.98, 183.0, 183.0, 183.0, 183.0, 183.0, 183.11, 183.3, 183.35, 183.49, 183.5, 183.69, 183.96, 183.98, 183.99, 184.0, 184.2, 184.86, 184.87, 184.99, 185.45, 185.5, 185.7], "OKX": [179.0, 179.0, 179.0, 178.98, 178.98, 178.98, 178.98, 178.98, 178.98, 178.98, 178.98, 178.97, 178.97, 178.97, 178.97, 178.97, 178.97, 178.97, 178.76, 178.76, 178.76, 178.76, 178.76, 178.76, 178.76, 178.76, 178.65, 178.6, 178.6, 178.6, 178.36, 178.36, 178.35, 178.31, 178.27, 178.27, 178.27, 178.26, 178.26, 178.05, 178.0, 178.0, 178.0, 178.0, 177.61, 177.0, 176.91, 176.78, 176.75, 176.65, 176.54, 176.36, 176.2, 176.0, 175.72, 175.44, 175.0, 170.0, 165.99, 165.99, 165.44, 165.44, 165.44, 165.44, 165.15, 165.15, 165.13, 165.0, 164.97, 164.69, 164.66, 164.53, 164.53, 164.53, 164.53, 164.53, 164.52, 164.5, 164.49, 164.13, 163.9, 163.76, 163.76, 163.76, 163.76, 163.49, 163.49, 163.49, 163.4, 178.41]};
        const historyData = {"dates": ["2025-12-09T11:50:27", "2025-12-09T12:05:46", "2025-12-09T12:22:39", "2025-12-09T12:37:39", "2025-12-09T12:59:38", "2025-12-09T13:20:12", "2025-12-09T13:38:31", "2025-12-09T14:07:01", "2025-12-09T14:17:20", "2025-12-09T14:30:17", "2025-12-09T14:46:37", "2025-12-09T15:08:39", "2025-12-09T15:21:10", "2025-12-09T15:35:22", "2025-12-09T15:48:24", "2025-12-09T16:06:51", "2025-12-09T16:18:39", "2025-12-09T16:31:05", "2025-12-09T16:51:02", "2025-12-09T17:03:46", "2025-12-09T17:13:52", "2025-12-09T17:26:24", "2025-12-09T17:50:37", "2025-12-09T18:07:49", "2025-12-09T18:20:30", "2025-12-09T18:33:43", "2025-12-09T18:50:27", "2025-12-09T19:04:46", "2025-12-09T19:20:41", "2025-12-09T19:31:30", "2025-12-09T19:49:51", "2025-12-09T20:05:56", "2025-12-09T20:20:28", "2025-12-09T20:34:11", "2025-12-09T20:53:10", "2025-12-09T21:07:24", "2025-12-09T21:18:08", "2025-12-09T21:30:00", "2025-12-09T21:40:53", "2025-12-09T21:58:48", "2025-12-09T22:15:19", "2025-12-09T22:28:37", "2025-12-09T22:42:40", "2025-12-09T22:58:05", "2025-12-09T23:15:13", "2025-12-09T23:27:24", "2025-12-09T23:40:13", "2025-12-09T23:56:42", "2025-12-10T00:10:09", "2025-12-10T00:49:21", "2025-12-10T01:18:45", "2025-12-10T02:02:36", "2025-12-10T02:40:20", "2025-12-10T03:20:17", "2025-12-10T03:51:05", "2025-12-10T04:13:45", "2025-12-10T04:30:11", "2025-12-10T04:47:47", "2025-12-10T05:10:05", "2025-12-10T05:22:00", "2025-12-10T05:35:15", "2025-12-10T05:49:15", "2025-12-10T06:06:24", "2025-12-10T06:18:07", "2025-12-10T06:33:43", "2025-12-10T06:51:08", "2025-12-10T07:05:12", "2025-12-10T07:17:01", "2025-12-10T07:30:07", "2025-12-10T07:42:47", "2025-12-10T07:54:40", "2025-12-10T08:10:57", "2025-12-10T08:22:34", "2025-12-10T08:39:45", "2025-12-10T08:53:55", "2025-12-10T09:07:00", "2025-12-10T09:19:53", "2025-12-10T09:33:20", "2025-12-10T09:46:41", "2025-12-10T10:06:46", "2025-12-10T10:17:32", "2025-12-10T10:31:34", "2025-12-10T10:46:26", "2025-12-10T11:02:02", "2025-12-10T11:18:32", "2025-12-10T11:31:02", "2025-12-10T11:51:03", "2025-12-10T12:10:20", "2025-12-10T12:25:13", "2025-12-10T12:42:43", "2025-12-10T13:06:43", "2025-12-10T13:29:32", "2025-12-10T13:48:50", "2025-12-10T14:03:00", "2025-12-10T14:23:47", "2025-12-10T14:37:09", "2025-12-10T14:51:49", "2025-12-10T15:12:54", "2025-12-10T15:26:04", "2025-12-10T15:40:29", "2025-12-10T15:52:06", "2025-12-10T16:10:46", "2025-12-10T16:22:49", "2025-12-10T16:37:51", "2025-12-10T16:54:16", "2025-12-10T17:05:58", "2025-12-10T17:17:42", "2025-12-10T17:32:20", "2025-12-10T17:47:04", "2025-12-10T18:06:34", "2025-12-10T18:17:37", "2025-12-10T18:32:10", "2025-12-10T18:49:50", "2025-12-10T19:12:47", "2025-12-10T19:23:26", "2025-12-10T19:45:47", "2025-12-10T20:03:49", "2025-12-10T20:21:08", "2025-12-10T20:35:12", "2025-12-10T21:07:55", "2025-12-10T21:21:44", "2025-12-10T21:33:35", "2025-12-10T21:50:37", "2025-12-10T22:19:07", "2025-12-10T22:39:19", "2025-12-10T23:26:17", "2025-12-10T23:48:23", "2025-12-11T00:12:39", "2025-12-11T00:30:16", "2025-12-11T00:56:07", "2025-12-11T01:24:49", "2025-12-11T02:09:19", "2025-12-11T02:54:24", "2025-12-11T03:27:23", "2025-12-11T03:56:14", "2025-12-11T04:16:51", "2025-12-11T04:38:56", "2025-12-11T04:51:57", "2025-12-11T05:10:32", "2025-12-11T05:31:00", "2025-12-11T06:00:13", "2025-12-11T06:13:32", "2025-12-11T06:28:23", "2025-12-11T06:46:16", "2025-12-11T07:02:21", "2025-12-11T07:25:18", "2025-12-11T07:47:25", "2025-12-11T08:15:41", "2025-12-11T08:38:15", "2025-12-11T09:10:50", "2025-12-11T09:34:21", "2025-12-11T09:48:08", "2025-12-11T10:16:20", "2025-12-11T10:35:09", "2025-12-11T10:47:26", "2025-12-11T11:01:54", "2025-12-11T11:11:48", "2025-12-11T11:24:44", "2025-12-11T11:35:20", "2025-12-11T11:44:55", "2025-12-11T11:52:53", "2025-12-11T12:00:39", "2025-12-11T12:19:29", "2025-12-11T12:37:41", "2025-12-11T13:02:47", "2025-12-11T13:25:02", "2025-12-11T13:58:34", "2025-12-11T14:10:36", "2025-12-11T14:23:48", "2025-12-11T14:37:18", "2025-12-11T14:48:21", "2025-12-11T14:57:37", "2025-12-11T15:08:31", "2025-12-11T15:21:17", "2025-12-11T15:37:16", "2025-12-11T15:49:19", "2025-12-11T15:59:19", "2025-12-11T16:13:48", "2025-12-11T16:28:50", "2025-12-11T16:47:41", "2025-12-11T17:01:43", "2025-12-11T17:30:31", "2025-12-11T17:47:11", "2025-12-11T17:59:16", "2025-12-11T18:12:22", "2025-12-11T18:26:54", "2025-12-11T18:45:25", "2025-12-11T18:59:10", "2025-12-11T19:10:26", "2025-12-11T19:23:06", "2025-12-11T19:34:08", "2025-12-11T19:43:48", "2025-12-11T19:52:04", "2025-12-11T19:59:52", "2025-12-11T20:12:55", "2025-12-11T20:26:55", "2025-12-11T20:38:59", "2025-12-11T20:48:12", "2025-12-11T20:56:10", "2025-12-11T21:04:16", "2025-12-11T21:15:42", "2025-12-11T21:29:44", "2025-12-11T21:40:10", "2025-12-11T21:48:31", "2025-12-11T21:56:45", "2025-12-11T22:05:18", "2025-12-11T22:16:51", "2025-12-11T22:31:17", "2025-12-11T22:42:50", "2025-12-11T22:51:51", "2025-12-11T22:59:09", "2025-12-11T23:09:46", "2025-12-11T23:29:26", "2025-12-11T23:49:16", "2025-12-12T00:05:17", "2025-12-12T00:30:27", "2025-12-12T00:56:56", "2025-12-12T01:30:03", "2025-12-12T02:20:00", "2025-12-12T03:00:47", "2025-12-12T03:34:12", "2025-12-12T04:00:17", "2025-12-12T04:19:00", "2025-12-12T04:35:35", "2025-12-12T04:50:57", "2025-12-12T05:04:06", "2025-12-12T05:14:51", "2025-12-12T05:27:59", "2025-12-12T05:43:40", "2025-12-12T05:54:32", "2025-12-12T06:09:31", "2025-12-12T06:19:48", "2025-12-12T06:39:40", "2025-12-12T07:00:03", "2025-12-12T07:11:13", "2025-12-12T07:15:31", "2025-12-12T07:37:06", "2025-12-12T07:47:40", "2025-12-12T08:06:09", "2025-12-12T08:13:04", "2025-12-12T08:31:28", "2025-12-12T08:47:32", "2025-12-12T09:10:04", "2025-12-12T09:24:33", "2025-12-12T09:37:30", "2025-12-12T09:52:18", "2025-12-12T10:06:02", "2025-12-12T10:17:48", "2025-12-12T10:33:27", "2025-12-12T10:49:09", "2025-12-12T11:07:30", "2025-12-12T11:15:03", "2025-12-12T11:31:27", "2025-12-12T11:52:34", "2025-12-12T12:04:24", "2025-12-12T12:26:08", "2025-12-12T12:42:21", "2025-12-12T13:06:54", "2025-12-12T13:21:15", "2025-12-12T13:43:55", "2025-12-12T14:07:36", "2025-12-12T14:20:52", "2025-12-12T14:33:53", "2025-12-12T14:52:26", "2025-12-12T15:07:44", "2025-12-12T15:13:37", "2025-12-12T15:33:42", "2025-12-12T15:42:52", "2025-12-12T15:55:38", "2025-12-12T16:09:35", "2025-12-12T16:28:53", "2025-12-12T16:43:16", "2025-12-12T17:02:57", "2025-12-12T17:13:09", "2025-12-12T17:24:38", "2025-12-12T17:40:03", "2025-12-12T17:49:25", "2025-12-12T18:06:05", "2025-12-12T18:15:13", "2025-12-12T18:34:50", "2025-12-12T18:53:55", "2025-12-12T19:06:18", "2025-12-12T19:12:55", "2025-12-12T19:29:10", "2025-12-12T19:46:52", "2025-12-12T20:02:58", "2025-12-12T20:04:59", "2025-12-12T20:17:01"], "medians": [175.42, 176.26, 176.26, 175.4, 175.93, 175.72, 175.52, 176.27, 175.39, 175.83, 175.72, 176.27, 176.0, 176.27, 175.9, 176.05, 176.27, 175.93, 175.9, 175.76, 176.0, 176.27, 176.27, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 175.39, 176.1, 176.1, 176.05, 176.04, 176.02, 176.01, 176.1, 176.03, 176.03, 176.1, 176.03, 176.09, 176.1, 176.01, 175.92, 175.92, 176.0, 176.03, 176.0, 175.52, 176.0, 176.1, 176.0, 176.12, 176.26, 176.25, 175.53, 175.91, 175.51, 175.72, 175.52, 175.53, 175.51, 176.25, 175.9, 175.92, 176.01, 176.17, 176.0, 175.53, 176.0, 176.17, 176.0, 175.91, 175.5, 175.51, 175.63, 175.48, 175.48, 175.65, 175.69, 175.69, 175.7, 175.7, 175.69, 175.68, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.7, 175.7, 175.7, 175.7, 175.7, 176.04, 176.1, 175.7, 175.69, 175.7, 176.01, 175.64, 175.69, 175.52, 175.69, 175.7, 175.9, 175.69, 175.69, 175.68, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 175.69, 176.29, 175.69, 175.7, 175.7, 175.7, 175.72, 175.69, 175.69, 175.7, 175.7, 175.69, 175.9, 175.7, 175.92, 175.76, 175.69, 175.69, 175.83, 175.69, 175.69, 176.54, 176.0, 176.0, 175.86, 176.2, 176.1, 175.72, 175.58, 176.2, 176.65, 176.45, 175.86, 163.5, 163.76, 163.76, 164.52, 164.31, 165.99, 168.95, 167.47, 167.47, 168.95, 176.75, 176.36, 176.1, 176.65, 176.54, 176.1, 176.28, 178.43, 178.56, 178.62, 177.0, 177.02, 177.01, 176.89, 176.89, 176.89, 178.29, 178.31, 178.29, 178.3, 178.25, 178.0, 178.0, 178.0, 178.0, 177.15, 177.21, 177.2, 177.15, 177.2, 177.21, 177.15, 177.06, 177.2, 177.1, 177.06, 177.1, 177.0, 176.91, 176.89, 176.88, 176.9, 175.69, 176.88, 178.0, 177.8, 178.0, 175.92, 178.5, 178.68, 178.6, 178.6, 176.27, 176.1, 176.21, 178.76, 178.76, 176.28, 176.28, 178.76, 178.76, 178.29, 176.28, 178.76, 176.27, 176.27, 178.29, 176.27, 178.0, 178.76, 176.09, 176.27, 176.27, 176.27, 176.1, 178.77, 178.3, 178.76, 176.27, 176.28, 179.67, 179.26, 179.0, 179.0, 176.88, 176.03, 176.1, 176.88, 177.21, 178.76, 176.04, 178.97, 178.5, 178.98, 176.09, 178.77, 178.31, 178.78, 178.31, 176.28, 178.97, 178.98, 178.27, 178.76, 176.27, 176.1, 176.23, 178.76, 178.76, 178.97, 176.2, 175.97], "officials": [154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.1, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.09, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68, 154.68], "premiums": [13.835171966255674, 14.380272550292016, 14.380272550292016, 13.822193380921489, 14.166125892277751, 14.02985074626866, 13.90006489292668, 14.386761842959128, 13.815704088254376, 14.10123296560676, 14.02985074626866, 14.386761842959128, 14.21155094094744, 14.386761842959128, 14.146658014276452, 14.243997404282945, 14.386761842959128, 14.166125892277751, 14.146658014276452, 14.055807916937052, 14.21155094094744, 14.386761842959128, 14.386761842959128, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 13.815704088254376, 14.276443867618429, 14.276443867618429, 14.243997404282945, 14.237508111615831, 14.224529526281646, 14.218040233614534, 14.276443867618429, 14.23101881894874, 14.23101881894874, 14.276443867618429, 14.238432085145044, 14.277370367966771, 14.283860081770388, 14.225452657537794, 14.1670452333052, 14.1670452333052, 14.218962943734178, 14.238432085145044, 14.218962943734178, 13.907456681160365, 14.218962943734178, 14.283860081770388, 14.218962943734178, 14.296839509377637, 14.387695502628326, 14.38120578882471, 13.91394639496398, 14.160555519501585, 13.900966967356732, 14.037250957232782, 13.907456681160365, 13.91394639496398, 13.900966967356732, 14.38120578882471, 14.154065805697972, 14.1670452333052, 14.225452657537794, 14.329288078395733, 14.218962943734178, 13.91394639496398, 14.218962943734178, 14.329288078395733, 14.218962943734178, 14.160555519501585, 13.894477253553116, 13.900966967356732, 13.978843533000191, 13.881497825945866, 13.881497825945866, 13.99182296060744, 14.017781815821916, 14.017781815821916, 14.024271529625535, 14.024271529625535, 14.017781815821916, 14.011292102018302, 14.017781815821916, 14.017781815821916, 14.017781815821916, 14.017781815821916, 14.017781815821916, 14.017781815821916, 14.017781815821916, 14.024271529625535, 14.024271529625535, 14.024271529625535, 14.024271529625535, 14.024271529625535, 14.24492179894866, 14.283860081770388, 14.024271529625535, 14.017781815821916, 14.024271529625535, 14.225452657537794, 13.985333246803805, 14.017781815821916, 13.907456681160365, 14.017781815821916, 14.024271529625535, 14.154065805697972, 14.017781815821916, 14.017781815821916, 14.011292102018302, 14.017781815821916, 14.017781815821916, 14.017781815821916, 14.017781815821916, 14.017781815821916, 13.582880786139121, 13.582880786139121, 13.582880786139121, 13.582880786139121, 13.582880786139121, 13.582880786139121, 13.582880786139121, 13.970778381174027, 13.582880786139121, 13.589345746056361, 13.589345746056361, 13.589345746056361, 13.602275665890865, 13.582880786139121, 13.582880786139121, 13.589345746056361, 13.589345746056361, 13.582880786139121, 13.718644944401342, 13.589345746056361, 13.73157486423583, 13.628135505559854, 13.582880786139121, 13.582880786139121, 13.673390224980608, 13.582880786139121, 13.582880786139121, 14.132402379105239, 13.783294543573824, 13.783294543573824, 13.692785104732355, 13.912593741918789, 13.847944142746307, 13.602275665890865, 13.511766227049396, 13.912593741918789, 14.203516938194982, 14.07421773985, 13.692785104732355, 5.702094647013184, 5.87018360486164, 5.87018360486164, 6.361520558572539, 6.225756400310315, 7.311869666408069, 9.225497801913617, 8.268683734160842, 8.268683734160842, 9.225497801913617, 14.268166537367463, 14.016033100594779, 13.847944142746307, 14.203516938194982, 14.132402379105239, 13.847944142746307, 13.964313421256783, 15.354279803465218, 15.438324282389445, 15.47711404189294, 14.429790535298675, 14.442720455133179, 14.436255495215919, 14.358675976208934, 14.358675976208934, 14.358675976208934, 15.26377036462373, 15.276700284458233, 15.26377036462373, 15.27023532454099, 15.23791052495474, 15.076286527023527, 15.076286527023527, 15.076286527023527, 15.076286527023527, 14.526764934057407, 14.5655546935609, 14.55908973364364, 14.526764934057407, 14.55908973364364, 14.5655546935609, 14.526764934057407, 14.46858029480217, 14.55908973364364, 14.494440134471157, 14.46858029480217, 14.494440134471157, 14.429790535298675, 14.371605896043437, 14.358675976208934, 14.35221101629169, 14.365140936126194, 13.582880786139121, 14.35221101629169, 15.076286527023527, 14.946987328678565, 15.076286527023527, 13.73157486423583, 15.399534522885952, 15.51590380139643, 15.464184122058436, 15.464184122058436, 13.957848461339543, 13.847944142746307, 13.919058701836049, 15.567623480734408, 15.567623480734408, 13.964313421256783, 13.964313421256783, 15.567623480734408, 15.567623480734408, 15.26377036462373, 13.964313421256783, 15.567623480734408, 13.957848461339543, 13.957848461339543, 15.26377036462373, 13.957848461339543, 15.076286527023527, 15.567623480734408, 13.841479182829064, 13.957848461339543, 13.957848461339543, 13.957848461339543, 13.847944142746307, 15.574088440651671, 15.27023532454099, 15.567623480734408, 13.957848461339543, 13.964313421256783, 16.15593483320402, 15.890871476596836, 15.72278251874838, 15.72278251874838, 14.35221101629169, 13.802689423325571, 13.847944142746307, 14.35221101629169, 14.5655546935609, 15.567623480734408, 13.809154383242813, 15.703387638996633, 15.399534522885952, 15.709852598913876, 13.841479182829064, 15.574088440651671, 15.276700284458233, 15.580553400568911, 15.276700284458233, 13.964313421256783, 15.703387638996633, 15.709852598913876, 15.250840444789244, 15.567623480734408, 13.957848461339543, 13.847944142746307, 13.931988621670536, 15.567623480734408, 15.567623480734408, 15.703387638996633, 13.912593741918789, 13.76389966382208]};
        const marketDepth = {"supply": [{"price": 163, "BINANCE": 0, "MEXC": 0, "OKX": 51595.92, "total": 51595.92}, {"price": 164, "BINANCE": 0, "MEXC": 0, "OKX": 52480.0, "total": 52480.0}, {"price": 165, "BINANCE": 0, "MEXC": 0, "OKX": 313593.72000000003, "total": 313593.72000000003}, {"price": 166, "BINANCE": 0, "MEXC": 0, "OKX": 4500.0, "total": 4500.0}, {"price": 170, "BINANCE": 0, "MEXC": 0, "OKX": 1000.0, "total": 1000.0}, {"price": 173, "BINANCE": 148383.56, "MEXC": 0, "OKX": 0, "total": 148383.56}, {"price": 174, "BINANCE": 1419929.3999999997, "MEXC": 0, "OKX": 0, "total": 1419929.3999999997}, {"price": 175, "BINANCE": 16977166.47, "MEXC": 0, "OKX": 1097.18, "total": 16978263.65}, {"price": 176, "BINANCE": 24719312.640000004, "MEXC": 1066.9343, "OKX": 10918.79, "total": 24731298.364300005}, {"price": 177, "BINANCE": 0, "MEXC": 7008.3078000000005, "OKX": 15378.6, "total": 22386.9078}, {"price": 178, "BINANCE": 0, "MEXC": 9935.902999999998, "OKX": 236908.40000000005, "total": 246844.30300000004}, {"price": 179, "BINANCE": 0, "MEXC": 24689.876100000005, "OKX": 418392.44, "total": 443082.3161}, {"price": 180, "BINANCE": 0, "MEXC": 26437.3707, "OKX": 0, "total": 26437.3707}, {"price": 181, "BINANCE": 0, "MEXC": 7250.101000000001, "OKX": 0, "total": 7250.101000000001}, {"price": 182, "BINANCE": 0, "MEXC": 685.0574, "OKX": 0, "total": 685.0574}], "demand": [{"price": 186, "BINANCE": 0, "MEXC": 2723.9443, "OKX": 0, "total": 2723.9443}, {"price": 185, "BINANCE": 0, "MEXC": 4003.0223, "OKX": 0, "total": 4003.0223}, {"price": 184, "BINANCE": 0, "MEXC": 3848.0923, "OKX": 0, "total": 3848.0923}, {"price": 183, "BINANCE": 0, "MEXC": 4925.0, "OKX": 0, "total": 4925.0}, {"price": 182, "BINANCE": 0, "MEXC": 752.5359, "OKX": 0, "total": 752.5359}, {"price": 178, "BINANCE": 0, "MEXC": 0, "OKX": 100.0, "total": 100.0}, {"price": 176, "BINANCE": 10.0, "MEXC": 0, "OKX": 0, "total": 10.0}, {"price": 175, "BINANCE": 104.85, "MEXC": 0, "OKX": 0, "total": 104.85}]};
        
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            html.setAttribute('data-theme', current === 'light' ? 'dark' : 'light');
            initCharts();
        }
        
        function filterTrend(period) {
            currentTrendPeriod = period;
            
            document.querySelectorAll('.trend-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.trend === period) btn.classList.add('active');
            });
            
            renderTrendChart(period);
        }
        
        function renderTrendChart(period) {
            const isDark = document.documentElement.getAttribute('data-theme') !== 'light';
            const bgColor = isDark ? '#1C1C1E' : '#ffffff';
            const textColor = isDark ? '#ffffff' : '#1a1a1a';
            const gridColor = isDark ? '#38383A' : '#e0e0e0';
            
            let filteredDates = historyData.dates || [];
            let filteredMedians = historyData.medians || [];
            let filteredOfficials = historyData.officials || [];
            let filteredPremiums = historyData.premiums || [];
            
            const now = new Date();
            let cutoffTime;
            
            switch(period) {
                case '1h':
                    cutoffTime = new Date(now - 60 * 60 * 1000);
                    break;
                case '1d':
                    cutoffTime = new Date(now - 24 * 60 * 60 * 1000);
                    break;
                case '1w':
                    cutoffTime = new Date(now - 7 * 24 * 60 * 60 * 1000);
                    break;
                case 'all':
                default:
                    cutoffTime = new Date(0);
            }
            
            const indices = [];
            filteredDates.forEach((d, i) => {
                if (new Date(d) >= cutoffTime) indices.push(i);
            });
            
            if (indices.length < 2) {
                document.getElementById('trendChart').innerHTML = '<div style="padding:60px;text-align:center;color:var(--text-secondary)"><div style="font-size:48px;margin-bottom:16px">üìà</div><div>Not enough data for this period</div></div>';
                return;
            }
            
            const dates = indices.map(i => filteredDates[i]);
            const medians = indices.map(i => filteredMedians[i]);
            const officials = indices.map(i => filteredOfficials[i]);
            const premiums = indices.map(i => filteredPremiums[i] || 0);
            
            const lastIdx = medians.length - 1;
            const lastMedian = medians[lastIdx];
            const lastPremium = premiums[lastIdx] || 0;
            
            const trendTraces = [];
            
            if (officials && officials.some(v => v > 0)) {
                trendTraces.push({
                    type: 'scatter',
                    mode: 'lines',
                    name: 'Official Rate',
                    x: dates,
                    y: officials,
                    line: { color: '#FF9500', width: 2, dash: 'dot' },
                    hovertemplate: '<b>Official:</b> %{y:.2f} ETB<extra></extra>'
                });
            }
            
            trendTraces.push({
                type: 'scatter',
                mode: 'lines',
                name: 'Black Market Rate',
                x: dates,
                y: medians,
                line: { color: '#00ff9d', width: 3 },
                fill: 'tonexty',
                fillcolor: 'rgba(0, 255, 157, 0.15)',
                hovertemplate: '<b>Black Market:</b> %{y:.2f} ETB<extra></extra>'
            });
            
            trendTraces.push({
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Premium %',
                x: dates,
                y: premiums,
                line: { color: '#FF3B30', width: 2, dash: 'dash' },
                marker: { size: 4 },
                yaxis: 'y2',
                hovertemplate: '<b>Premium:</b> %{y:.1f}%<extra></extra>'
            });
            
            const allYValues = [...medians, ...officials.filter(v => v > 0)];
            const minY = Math.floor(Math.min(...allYValues) / 10) * 10 - 10;
            const maxY = Math.ceil(Math.max(...allYValues) / 10) * 10 + 20;
            const maxPremium = Math.max(...premiums) + 5;
            
            const trendLayout = {
                paper_bgcolor: bgColor,
                plot_bgcolor: bgColor,
                font: { color: textColor, family: '-apple-system, BlinkMacSystemFont, sans-serif' },
                showlegend: true,
                legend: { orientation: 'h', y: -0.18 },
                margin: { l: 60, r: 60, t: 20, b: 70 },
                xaxis: {
                    gridcolor: gridColor,
                    tickformat: period === '1h' ? '%H:%M' : '%m/%d %H:%M'
                },
                yaxis: {
                    title: 'Rate (ETB)',
                    gridcolor: gridColor,
                    zerolinecolor: gridColor,
                    range: [minY, maxY],
                    dtick: 10
                },
                yaxis2: {
                    title: 'Premium (%)',
                    overlaying: 'y',
                    side: 'right',
                    showgrid: false,
                    range: [0, maxPremium],
                    ticksuffix: '%'
                },
                hovermode: 'x unified',
                annotations: [
                    {
                        x: dates[lastIdx],
                        y: lastMedian,
                        xanchor: 'left',
                        yanchor: 'middle',
                        text: '<b>' + lastMedian.toFixed(1) + '</b>',
                        font: { color: '#00ff9d', size: 12 },
                        showarrow: false,
                        xshift: 10,
                        bgcolor: 'rgba(0,0,0,0.7)',
                        borderpad: 4
                    },
                    {
                        x: dates[lastIdx],
                        y: lastPremium,
                        xanchor: 'left',
                        yanchor: 'middle',
                        xref: 'x',
                        yref: 'y2',
                        text: '<b>' + lastPremium.toFixed(1) + '%</b>',
                        font: { color: '#FF3B30', size: 11 },
                        showarrow: false,
                        xshift: 10,
                        bgcolor: 'rgba(0,0,0,0.7)',
                        borderpad: 4
                    }
                ]
            };
            
            Plotly.newPlot('trendChart', trendTraces, trendLayout, {responsive: true, displayModeBar: false});
        }
        
        function renderMarketDepth() {
            const supplyContainer = document.getElementById('supplyChart');
            let supplyHtml = '';
            const supplyData = marketDepth.supply || [];
            const maxSupply = Math.max(...supplyData.map(d => d.total), 1);
            
            supplyData.slice(0, 15).forEach(item => {
                const binancePct = (item.BINANCE / maxSupply * 100) || 0;
                const mexcPct = (item.MEXC / maxSupply * 100) || 0;
                const okxPct = (item.OKX / maxSupply * 100) || 0;
                
                supplyHtml += `
                    <div style="display:grid;grid-template-columns:100px 70px 1fr;gap:8px;align-items:center;margin-bottom:8px;">
                        <span style="font-weight:600;color:var(--text);font-size:13px;">$` + item.total.toLocaleString(undefined, {maximumFractionDigits:0}) + `</span>
                        <span style="color:var(--green);font-weight:600;">` + item.price + ` Br</span>
                        <div style="display:flex;height:20px;border-radius:4px;overflow:hidden;background:var(--border);">
                            ` + (item.BINANCE > 0 ? `<div style="width:` + binancePct + `%;background:#F3BA2F;" title="Binance: $` + item.BINANCE.toLocaleString() + `"></div>` : '') + `
                            ` + (item.MEXC > 0 ? `<div style="width:` + mexcPct + `%;background:#2E55E6;" title="MEXC: $` + item.MEXC.toLocaleString() + `"></div>` : '') + `
                            ` + (item.OKX > 0 ? `<div style="width:` + okxPct + `%;background:#A855F7;" title="OKX: $` + item.OKX.toLocaleString() + `"></div>` : '') + `
                        </div>
                    </div>
                `;
            });
            
            if (supplyData.length === 0) {
                supplyHtml = '<div style="text-align:center;padding:20px;color:var(--text-secondary);">No supply data</div>';
            }
            supplyContainer.innerHTML = supplyHtml;
            
            const demandContainer = document.getElementById('demandChart');
            let demandHtml = '';
            const demandData = marketDepth.demand || [];
            const maxDemand = Math.max(...demandData.map(d => d.total), 1);
            
            demandData.slice(0, 15).forEach(item => {
                const binancePct = (item.BINANCE / maxDemand * 100) || 0;
                const mexcPct = (item.MEXC / maxDemand * 100) || 0;
                const okxPct = (item.OKX / maxDemand * 100) || 0;
                
                demandHtml += `
                    <div style="display:grid;grid-template-columns:100px 70px 1fr;gap:8px;align-items:center;margin-bottom:8px;">
                        <span style="font-weight:600;color:var(--text);font-size:13px;">$` + item.total.toLocaleString(undefined, {maximumFractionDigits:0}) + `</span>
                        <span style="color:var(--red);font-weight:600;">` + item.price + ` Br</span>
                        <div style="display:flex;height:20px;border-radius:4px;overflow:hidden;background:var(--border);">
                            ` + (item.BINANCE > 0 ? `<div style="width:` + binancePct + `%;background:#F3BA2F;" title="Binance: $` + item.BINANCE.toLocaleString() + `"></div>` : '') + `
                            ` + (item.MEXC > 0 ? `<div style="width:` + mexcPct + `%;background:#2E55E6;" title="MEXC: $` + item.MEXC.toLocaleString() + `"></div>` : '') + `
                            ` + (item.OKX > 0 ? `<div style="width:` + okxPct + `%;background:#A855F7;" title="OKX: $` + item.OKX.toLocaleString() + `"></div>` : '') + `
                        </div>
                    </div>
                `;
            });
            
            if (demandData.length === 0) {
                demandHtml = '<div style="text-align:center;padding:20px;color:var(--text-secondary);">No demand data</div>';
            }
            demandContainer.innerHTML = demandHtml;
        }
        
        function initCharts() {
            const isDark = document.documentElement.getAttribute('data-theme') !== 'light';
            const bgColor = isDark ? '#1C1C1E' : '#ffffff';
            const textColor = isDark ? '#ffffff' : '#1a1a1a';
            const gridColor = isDark ? '#38383A' : '#e0e0e0';
            
            const scatterTraces = [];
            const colors = {
                'BINANCE': '#F3BA2F',
                'MEXC': '#2E55E6', 
                'OKX': '#A855F7'
            };
            
            let allPrices = [];
            let xIndex = 0;
            const exchangeOrder = ['BINANCE', 'MEXC', 'OKX'];
            const exchangeNames = [];
            
            for (const exchange of exchangeOrder) {
                const prices = chartData[exchange];
                if (prices && prices.length > 0) {
                    allPrices = allPrices.concat(prices);
                    exchangeNames.push(exchange);
                    
                    const xPositions = prices.map(() => xIndex + (Math.random() - 0.5) * 0.6);
                    scatterTraces.push({
                        type: 'scatter',
                        mode: 'markers',
                        name: exchange,
                        x: xPositions,
                        y: prices,
                        marker: { 
                            color: colors[exchange] || '#00C805',
                            size: 10,
                            opacity: 0.75,
                            line: { color: 'rgba(255,255,255,0.5)', width: 1 }
                        },
                        hovertemplate: '<b>%{y:.2f} ETB</b><extra>' + exchange + '</extra>'
                    });
                    xIndex++;
                }
            }
            
            if (allPrices.length > 0) {
                const sortedAll = [...allPrices].sort((a, b) => a - b);
                const overallMedian = sortedAll[Math.floor(sortedAll.length / 2)];
                
                scatterTraces.push({
                    type: 'scatter',
                    mode: 'lines',
                    name: 'Median: ' + overallMedian.toFixed(2) + ' ETB',
                    x: [-0.5, exchangeNames.length - 0.5],
                    y: [overallMedian, overallMedian],
                    line: { color: '#00ff9d', width: 2, dash: 'dash' },
                    hoverinfo: 'skip'
                });
            }
            
            const scatterLayout = {
                paper_bgcolor: bgColor,
                plot_bgcolor: bgColor,
                font: { color: textColor, family: '-apple-system, BlinkMacSystemFont, sans-serif' },
                showlegend: true,
                legend: { orientation: 'h', y: -0.15 },
                margin: { l: 60, r: 30, t: 20, b: 60 },
                xaxis: {
                    tickmode: 'array',
                    tickvals: exchangeNames.map((_, i) => i),
                    ticktext: exchangeNames,
                    gridcolor: gridColor,
                    zeroline: false
                },
                yaxis: {
                    title: 'Price (ETB)',
                    gridcolor: gridColor,
                    zerolinecolor: gridColor
                },
                hovermode: 'closest'
            };
            
            Plotly.newPlot('scatterChart', scatterTraces, scatterLayout, {responsive: true, displayModeBar: false});
            
            renderTrendChart(currentTrendPeriod);
            renderMarketDepth();
        }
        
        document.addEventListener('DOMContentLoaded', initCharts);
    </script>
</body>
</html>